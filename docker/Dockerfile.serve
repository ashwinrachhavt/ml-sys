FROM python:3.11-slim AS base

ENV PYTHONUNBUFFERED=1

WORKDIR /app

COPY src ./src
COPY scripts ./scripts
COPY config ./config
COPY pyproject.toml ./

RUN pip install --upgrade pip && pip install .[serve] --no-cache-dir || pip install . --no-cache-dir

EXPOSE 8000

CMD ["python", "scripts/serve.py", "--host", "0.0.0.0", "--port", "8000"]
